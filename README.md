# 树莓派B3硬件控制项目

这是一个基于树莓派B3的硬件控制项目，使用C语言和WiringPi库实现了多个电子元件的控制，包括按钮检测、TM1637四位数码管时钟显示、RGB LED控制和蜂鸣器控制。

## 项目结构

```
RaspberryPi-B3-project/
├── main.c              # 主程序文件，包含菜单系统和演示模式
├── Makefile            # 编译配置文件
├── components/         # 组件模块目录
│   ├── botton.c/.h     # 按钮控制模块
│   ├── clock.c/.h      # TM1637数码管时钟显示模块
│   ├── beep.c/.h       # 蜂鸣器控制模块
│   └── rgb.c/.h        # RGB LED控制模块
└── README.md           # 项目说明文档
```

## 硬件连接

### 引脚分配表

| 组件 | 引脚类型 | GPIO引脚 | 物理引脚 |
|------|----------|----------|----------|
| 按钮 | 输入 | GPIO 4 | Pin 7 |
| 蜂鸣器 | 输出 | GPIO 18 | Pin 12 |
| TM1637时钟 CLK | 输出 | GPIO 27 | Pin 13 |
| TM1637时钟 DIO | 输出 | GPIO 22 | Pin 15 |
| RGB LED 红色 | 输出 | GPIO 16 | Pin 36 |
| RGB LED 绿色 | 输出 | GPIO 20 | Pin 38 |
| RGB LED 蓝色 | 输出 | GPIO 21 | Pin 40 |

## TODO List

### 元件功能
- [x] 实现按钮基本模块
- [x] 实现蜂鸣器基本模块
- [x] 实现数码管基本模块
- [x] 用数码管显示实际时间(时:分)
- [x] 实现LED基本模块
- [ ] 添加长按按钮功能（区分短按和长按操作）
- [ ] 实现温湿度传感器模块
- [ ] 实现音乐播放功能（蜂鸣器播放简单旋律）

### 组合功能
- [ ] 实现闹钟功能（设定闹钟时间，到时间蜂鸣器响铃，LED闪烁）
- [ ] 实现秒表功能（按钮开始/暂停/重置，数码管显示计时）
- [ ] 实现温度显示功能（集成温度传感器，数码管显示温度）
- [ ] 实现按钮控制RGB灯颜色切换

### 界面优化
- [ ] 编写前端界面

### 代码优化
- [ ] 添加配置文件支持（保存用户设置）
- [ ] 实现非阻塞式按钮检测（使用中断）
- [ ] 添加错误日志记录功能
- [ ] 优化内存使用和资源管理
- [ ] 添加单元测试用例

### 高级功能
- [ ] 实现Web界面控制
- [ ] 添加手机APP远程控制
- [ ] 添加定时任务调度器
- [ ] 实现数据记录和图表显示
- [ ] 集成物联网功能（MQTT、云平台对接）

## 编译和运行

### 环境要求

- 树莓派B3或更高版本
- Raspbian OS
- WiringPi库
- GCC编译器

### 安装依赖

```bash
# 安装WiringPi库
sudo apt update
sudo apt install wiringpi

# 验证安装
gpio -v
```

### 编译项目

```bash
# 编译项目
make

# 清理编译文件
make clean

# 重新编译
make rebuild
```

### 运行程序

```bash
# 运行主程序（需要root权限访问GPIO）
sudo ./main_app
```

## 开发说明

### 添加新功能模块

1. 在 `components/` 目录下创建 `.c` 和 `.h` 文件
2. 在头文件中定义引脚和函数接口
3. 在源文件中实现具体功能
4. 更新 `Makefile` 中的源文件列表
5. 在 `main.c` 中集成新模块

### 注意事项

- 程序使用BCM GPIO编号模式

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。
